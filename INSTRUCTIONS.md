# 飞书机器人配置指南 (多维表格版)

请按照以下步骤创建并配置您的飞书机器人，然后将获取到的凭证填入项目根目录下的 `.env` 文件中。

## 步骤一：创建企业自建应用

1.  登录 [飞书开放平台](https://open.feishu.cn/app)。
2.  进入 **开发者后台**，点击 **创建应用**，然后选择 **企业自建应用**。
3.  填写应用的名称（例如：“值日提醒机器人”）和描述，然后点击 **确定创建**。

## 步骤二：获取应用凭证

创建成功后，您会进入应用的管理后台。

1.  在左侧菜单中，选择 **凭证与基础信息**。
2.  在此页面，您可以看到 **App ID** 和 **App Secret**。
3.  将这两个值复制并粘贴到 `.env` 文件对应的 `APP_ID` 和 `APP_SECRET` 字段中。

## 步骤三：为应用添加权限

为了让机器人能够执行任务，您需要为它开启相应的 API 权限。

1.  在左侧菜单中，选择 **权限管理**。
2.  在搜索框中，搜索并开通以下权限：
    *   `im:chat` - 获取群组信息
    *   `im:message` - 读取和发送单聊、群聊消息
    *   `im:message.group_at_msg` - 发送群聊 @ 消息
    *   `contact:user.readonly` - 以应用身份读取通讯录
    *   `bitable:app` - 读写多维表格
    *   `bitable:app:readonly` - 读取多维表格

## 步骤四：发布应用并获取群聊 ID

1.  在左侧菜单中，选择 **版本管理与发布**。
2.  创建一个新版本，然后申请 **线上发布**。（通常企业自建应用会很快通过审核）。
3.  应用发布后，进入您需要机器人发送消息的飞书群聊。
4.  将机器人拉入该群聊。
5.  在群聊的设置中，找到并点击 **群机器人**，然后点击机器人头像，将机器人添加到群聊中。
6.  在群聊中，发送任意消息并 `@` 刚刚加入的机器人。
7.  回到飞书开放平台的 **开发者后台**，进入您的应用，在左侧菜单中选择 **事件订阅**，您应该能看到刚刚的 `@` 消息事件。在事件的详细信息中，找到 `chat_id`。
8.  将这个 `chat_id` 复制并粘贴到 `.env` 文件对应的 `CHAT_ID` 字段中。

## 步骤五：创建多维表格并获取其 ID

1.  在飞书中，新建一个**多维表格 (Bitable)**。
2.  表格需要至少包含三个字段（列）：
    *   `日期` (类型: 日期)
    *   `负责人` (类型: 人员)
3.  创建后，点击右上角的 **分享** 按钮，将机器人的账号添加为**可编辑者**。
4.  复制浏览器地址栏中的 URL。URL 的格式通常如下：
    `https://<your-domain>.feishu.cn/base/bascnxxxxxxxxxxxx/tblxxxxxxxxxxxx`
5.  URL 中 `base/` 后面的那串字符（例如 `bascnxxxxxxxxxxxx`）就是 **App Token**。将其复制并粘贴到 `.env` 文件对应的 `BITABLE_APP_TOKEN` 字段中。
6.  URL 中 `tbl` 后面的那串字符（例如 `tblxxxxxxxxxxxx`）就是 **Table ID**。将其复制并粘贴到 `.env` 文件对应的 `BITABLE_TABLE_ID` 字段中。

---

完成以上所有步骤并填写好 `.env` 文件后，我们就可以继续下一步的编码工作了。